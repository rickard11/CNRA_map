---
title: "Santa_Clara_River"
editor: visual
format:
  dashboard:
    orientation: columns
---

## Column {width="100%"}

### Row {height="50%"}

```{r,hanson}
library(plotly)
library (dplyr)
hansonrain<-read.csv("data/12-1-2025 CalGro Download/Santa Clara River Aflalo Rain Gauge Rain Gauge 20231102-20251201.csv")
hansonwell<-read.csv("data/12-1-2025 CalGro Download/Santa Clara River Hanson Retired Well Well 20231102-20251201.csv")
hansonwell$Date.and.Time<-as.POSIXct(hansonwell$Date.and.Time,format="%Y-%m-%d %H:%M:%S")

hourly_data<-hansonwell
daily_data<-hansonrain

daily_means <- hourly_data %>%
  mutate(Date = as.Date(Date.and.Time)) %>% # Extract the date part
  group_by(Date) %>%
  summarize(mean_value = mean(ft..below.ground., na.rm = TRUE)) %>%
  ungroup()

daily_data$Date<-as.Date(daily_data$Date,format="%Y-%m-%d (%A)")

### Make 2 seperate interactive plots with the same scale

a<-plot_ly(data= daily_data, x = daily_data$Date, 
        y = daily_data$Rain..in., type = 'bar',marker =list(color="99CCff")) %>%
        layout(yaxis = list(autorange = "reversed"))

b<-plot_ly(data = hourly_data, x = hourly_data$Date.and.Time, y = hourly_data$ft..below.ground., name = 'Hourly', type = 'scatter', mode = 'lines',line = list(color = "grey"),opacity = 0.3) %>% 
  add_trace(data = daily_means, x = daily_means$Date, y = daily_means$mean_value, mode = 'lines',line = list(color = "black"),opacity = 0.9)  %>% 
  layout(yaxis = list(autorange = "reversed"))

fig <- subplot(a, b, nrows =2 ) %>% 
  layout(title = list(text = "Hanson"), 
         xaxis = list(gridcolor = 'lightgray'), 
         yaxis = list(gridcolor = 'lightgray')) 
fig
```


### Row {height="50%"}

```{r,Aflalo}
aflalorain<-read.csv("data/12-1-2025 CalGro Download/Santa Clara River Aflalo Rain Gauge Rain Gauge 20231102-20251201.csv")
aflalowell<-read.csv("data/12-1-2025 CalGro Download/Santa Clara River Aflalo Well Well 20231103-20251201.csv")
aflalowell$Date.and.Time<-as.POSIXct(aflalowell$Date.and.Time,format="%Y-%m-%d %H:%M:%S")

hourly_data<-aflalowell
daily_data<-aflalorain

daily_means <- hourly_data %>%
  mutate(Date = as.Date(Date.and.Time)) %>% # Extract the date part
  group_by(Date) %>%
  summarize(mean_value = mean(ft..below.ground., na.rm = TRUE)) %>%
  ungroup()

daily_data$Date<-as.Date(daily_data$Date,format="%Y-%m-%d (%A)")

### Make 2 seperate interactive plots with the same scale

a<-plot_ly(data= daily_data, x = daily_data$Date, 
        y = daily_data$Rain..in., type = 'bar',marker =list(color="99CCff")) %>%
        layout(yaxis = list(autorange = "reversed"))


b<-plot_ly(data = hourly_data, x = hourly_data$Date.and.Time, y = hourly_data$ft..below.ground., name = 'Hourly', type = 'scatter', mode = 'lines',line = list(color = "grey"),opacity = 0.3) %>% 
  add_trace(data = daily_means, x = daily_means$Date, y = daily_means$mean_value, mode = 'lines',line = list(color = "black"),opacity = 0.9)  %>% 
  layout(yaxis = list(autorange = "reversed"))

fig <- subplot(a, b, nrows =2 ) %>% 
  layout(title = list(text = "Aflalo"), 
         xaxis = list(gridcolor = 'lightgray'), 
         yaxis = list(gridcolor = 'lightgray')) 
fig

```